const Apollo = {
    version: "20240922",
    empty: "hiker://empty",
    url: "https://javmenu.com/zh",
    d: [],
    data: {
        category: getMyVar('Apo.category', '0'),
        subCate: getMyVar('Apo.subCate', '0'),
    },
    baseParse: () => {
        const page = parseInt(MY_URL.split('##')[2])
        let categoryList = [{
            "path": "/rank/censored/day",
            "sub": [{
                "path": "/rank/censored/day",
                "title": "æ—¥æ¦œ"
            }, {
                "path": "/rank/censored/week",
                "title": "é€±æ¦œ"
            }, {
                "path": "/rank/censored/month",
                "title": "æœˆæ¦œ"
            }, {
                "path": "/rank/censored/actress",
                "title": "å¥³ä¼˜æ¦œ"
            }],
            "title": "æ’è¡Œæ¦œ",
            "type": "video"
        }, {
            "path": "/censored/filter",
            "sub": [{
                "path": "/censored/filter",
                "title": "æœ‰ç "
            }, {
                "path": "/uncensored/filter",
                "title": "æ— ç "
            }, {
                "path": "/western/filter",
                "title": "æ¬§ç¾"
            }, {
                "path": "/fc2/filter",
                "title": "FC2"
            }, {
                "path": "/hanime/online",
                "title": "æˆäººåŠ¨ç”»"
            }, {
                "path": "/chinese/online",
                "title": "å›½äº§"
            }],
            "title": "ç­›é€‰å™¨",
            "type": "video"
        }, {
            "path": "/censored/actress",
            "sub": [{
                "path": "/censored/actress",
                "title": "æœ‰ç "
            }, {
                "path": "/uncensored/actress",
                "title": "æ— ç "
            }, {
                "path": "/western/actress",
                "title": "æ¬§ç¾"
            }],
            "title": "å¥³ä¼˜",
            "type": "actress"
        }, {
            "path": "/series/censored",
            "sub": [{
                "path": "/series/censored",
                "title": "æœ‰ç "
            }, {
                "path": "/series/uncensored",
                "title": "æ— ç "
            }, {
                "path": "/series/western",
                "title": "æ¬§ç¾"
            }, {
                "path": "/code/LUXU",
                "title": "LUXU"
            }, {
                "path": "/code/ARA",
                "title": "ARA"
            }, {
                "path": "/code/SIRO",
                "title": "SIRO"
            }],
            "title": "ç³»åˆ—",
            "type": "series"
        }]
        const currentCate = categoryList[Apollo.data.category]
        let url
        let type = currentCate.type
        let path = currentCate.path
        if (currentCate.sub.length > 0) {
            url = Apollo.url + getMyVar("url", currentCate.sub[Apollo.data.subCate].path)
            path = currentCate.sub[Apollo.data.subCate].path
        } else {
            url = Apollo.url + getMyVar("url", currentCate.path)
        }
        url = url.replace(/https?.*\/zh(https?.*)/, "$1")

        if (page === 1) {
            categoryList.forEach((cate, index) => {
                Apollo.d.push({
                    title: parseInt(Apollo.data.category) === index ? 'â€˜â€˜â€™â€™<strong><font color="#ff1493">' + cate.title + '</font></strong>' : cate.title,
                    url: $(Apollo.empty + "#noLoading#")
                        .lazyRule((index) => {
                        putMyVar("Apo.category", index.toString())
                        putMyVar("Apo.subCate", '0')
                        clearMyVar("sort")
                        clearMyVar("url")
                        refreshPage(true)
                        return "hiker://empty"
                    }, index),
                    col_type: 'scroll_button',
                })
            })
            if (currentCate.sub.length > 0) {
                Apollo.d.push({
                    col_type: 'blank_block',
                })
                currentCate.sub.forEach((cate, index) => {
                    Apollo.d.push({
                        title: parseInt(Apollo.data.subCate) === index ? 'â€˜â€˜â€™â€™<strong><font color="#ff1493">' + cate.title + '</font></strong>' : cate.title,
                        url: $(Apollo.empty + "#noLoading#")
                            .lazyRule((index) => {
                            putMyVar("Apo.subCate", index.toString())
                            clearMyVar("sort")
                            clearMyVar("url")
                            refreshPage(true)
                            return "hiker://empty"
                        }, index),
                        col_type: 'scroll_button',
                    })
                })
            }
        }
        //ç¿»é¡µ
        /*        if (page !== 1) {
            url = url.includes("?") ? url + "&page=" + page : url + "?page=" + page
        }
        const html = fetch(url, {
            headers: {
                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'
            }
        })
        log(url)*/

        let nextPage = getMyVar("nextPage", "");
        if (nextPage && MY_PAGE > 1) {
            url = nextPage;
        } else if (MY_PAGE > 1) {
            url = "æ²¡æœ‰ä¸‹ä¸€é¡µå“¦ğŸ˜‘"
        }
        const html = fetch(url, {
            headers: {
                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'
            }
        })
        log(url)
        try {
            var next = pdfh(html, ".pagination&&li:matches(â€º)&&a&&href")
            putMyVar("nextPage", next);
        } catch {
            clearMyVar("nextPage");
            // log("å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜");
        }

        if (page === 1) {
            Apollo.videoSort(html, url)
            Apollo.d.push({
                col_type: "blank_block",
            })
        }

        Apollo.dtfenlei(html, url)
        switch (type) {
            case 'video':
                if (path.includes("actress")) {
                    Apollo.avatarType(html)
                } else {
                    Apollo.videoType(html)
                }
                break
            case 'actress':
                Apollo.avatarType(html)
                break
            case 'series':
                if (path.includes("series")) {
                    Apollo.seriesType(html)
                } else {
                    Apollo.videoType(html)
                }
                break
            default:
                Apollo.videoType(html)
        }
        setResult(Apollo.d)
    },

    //ä¸€çº§sort
    videoSort: (html, url) => {
        function addParam(key, value) {
            let[baseUrl, queryString] = url.split('?');
            let params = queryString ? queryString.split('&')
                .map(p => p.split('=')) : [];
            let paramFound = false;
            for (let i = 0; i < params.length; i++) {
                if (params[i][0] === key) {
                    paramFound = true;
                    if (key === 'single' && value == '1') {
                        params.splice(i, 1);
                    } else if (key === 'sort' && value === 'all') {
                        params.splice(i, 1);
                    } else {
                        params[i][1] = value;
                    }
                    break;
                }
            }
            if (!paramFound && !(key === 'single' && value === '1') && !(key === 'sort' && value === 'all')) {
                params.push([key, value]);
            }
            queryString = params.map(p => p.join('='))
                .join('&');
            return queryString ? '?' + queryString : '';
        }
        Apollo.d.push({
            col_type: "blank_block",
        })
        const sort = pdfa(html, '.ml-auto&&button');
        sort.forEach((item, index) => {
            var title = pdfh(item, 'Text');
            var button = pdfh(item, 'button&&onclick');
            var value = button.match(/\(.*\,\s\'(.*?)\'/) ? button.match(/\(.*\,\s\'(.*?)\'/)[1].replace("all", "^(?!.*sort).*$") : "single";
            Apollo.d.push({
                title: new RegExp(value)
                    .test(url) ? 'â€˜â€˜â€™â€™<strong><font color="#ff1493">' + title + '</font></strong>' : title,
                url: url.split('?')[0].replace("https://javmenu.com/zh", "") + eval(button) + $('#noLoading#')
                    .lazyRule(() => {
                    putMyVar("url", input);
                    refreshPage(false);
                    return 'hiker://empty'
                }),
                col_type: 'scroll_button'
            })
            if (sort.length > 5 ? index == 3 : index == 2) {
                Apollo.d.push({
                    col_type: "blank_block",
                })
            }
        })
    },

    videoSort1: (html, url) => {
        function addParam(key, value) {
            let[baseUrl, queryString] = url.split('?');
            let params = queryString ? queryString.split('&')
                .map(p => p.split('=')) : [];
            let paramFound = false;
            for (let i = 0; i < params.length; i++) {
                if (params[i][0] === key) {
                    paramFound = true;
                    if (key === 'single' && value == '1') {
                        params.splice(i, 1);
                    } else if (key === 'sort' && value === 'all') {
                        params.splice(i, 1);
                    } else {
                        params[i][1] = value;
                    }
                    break;
                }
            }
            if (!paramFound && !(key === 'single' && value === '1') && !(key === 'sort' && value === 'all')) {
                params.push([key, value]);
            }
            queryString = params.map(p => p.join('='))
                .join('&');
            return queryString ? '?' + queryString : '';
        }
        Apollo.d.push({
            col_type: "blank_block",
        })
        const sort = pdfa(html, '.ml-auto&&button');
        sort.forEach((item, index) => {
            var title = pdfh(item, 'Text');
            var button = pdfh(item, 'button&&onclick');
            var value = button.match(/\(.*\,\s\'(.*?)\'/) ? button.match(/\(.*\,\s\'(.*?)\'/)[1].replace("all", "^(?!.*sort).*$") : "single";
            Apollo.d.push({
                title: new RegExp(value)
                    .test(url) ? 'â€˜â€˜â€™â€™<strong><font color="#ff1493">' + title + '</font></strong>' : title,
                url: url.split('?')[0] + eval(button) + $('#noLoading#')
                    .lazyRule(() => {
                    putMyVar("yurl", input);
                    refreshPage(false);
                    return 'hiker://empty'
                }),
                col_type: 'scroll_button'
            })
            if (sort.length > 5 ? index == 3 : index == 2) {
                Apollo.d.push({
                    col_type: "blank_block",
                })
            }
        })
    },

    //åŠ¨æ€åˆ†ç±»
    dtfenlei: (html, url) => {
        const åˆ†ç±»é¢œè‰² = '#ff1493'
        const å¤§ç±»å®šä½ = '.card-body&&.filter-list'
        const æ‹¼æ¥åˆ†ç±» = ''
        const å°ç±»å®šä½ = 'body&&a'
        const åˆ†ç±»æ ‡é¢˜ = 'a&&Text'
        const åˆ†ç±»é“¾æ¥ = 'a&&onclick'
        try {
            var categories = pdfa(html, å¤§ç±»å®šä½)
                .concat(pdfa(html, æ‹¼æ¥åˆ†ç±»))
        } catch (e) {
            var categories = pdfa(html, å¤§ç±»å®šä½)
        }
        let init_cate = []
        for (let i = 0; i < 20; i++) {
            init_cate.push("0")
        }
        const cate_temp_json = getVar(MY_RULE.title, JSON.stringify(init_cate))
        const cate_temp = JSON.parse(cate_temp_json)
        if (MY_PAGE === 1) {
            categories.forEach((category, index) => {
                let sub_categories = pdfa(category, å°ç±»å®šä½)
                    .filter(t => pdfh(t, 'Text')
                    .trim() !== '');
                let genre_title = pdfa(category, "body&&.genre-title")
                    .map(t => pdfh(t, "Text"));
                sub_categories.forEach((item, key) => {
                    let title = key == 0 ? genre_title[0] : pdfh(item, åˆ†ç±»æ ‡é¢˜)
                    let urll = key == 0 ? pdfh(item, "a&&href")
                        .replace("https://javmenu.com/zh", "") : pdfh(item, åˆ†ç±»é“¾æ¥)
                    var value = pdfh(item, åˆ†ç±»é“¾æ¥)
                        .match(/\d+/) ? pdfh(item, åˆ†ç±»é“¾æ¥)
                        .match(/\d+/)[0] : "all";
                    let params = url.match(/c=([^&]+)/) ? url.match(/c=([^&]+)/)[1] : "";
                    if (params) {
                        var c_array = params.split(",");
                    } else {
                        var c_array = [];
                    }
                    Apollo.d.push({
                        title: (c_array.indexOf(value.toString()) !== -1 || key == 0) ? 'â€œâ€œâ€â€<b><span style="color: ' + åˆ†ç±»é¢œè‰² + '">' + title + '</span></b>' : title,
                        url: urll + $('#noLoading#')
                            .lazyRule((params, key, url) => {
                            params.cate_temp[params.index] = params.key.toString()
                            putVar(MY_RULE.title, JSON.stringify(params.cate_temp))

                            function addFilterParam(key, value) {
                                let params = url.match(/c=([^&]+)/) ? url.match(/c=([^&]+)/)[1] : "";
                                if (params) {
                                    var c_array = params.split(",");
                                } else {
                                    var c_array = [];
                                }
                                if (!c_array.includes(value.toString())) {
                                    if (c_array.length < 5) c_array.push(value.toString());
                                } else {
                                    c_array.splice(c_array.indexOf(value.toString()), 1)
                                }
                                paramsc = c_array.join(',');
                                if (params != "") {
                                    urlsc = url.replace(/(\?|&)c=[^&]+/, "$1c=" + paramsc)
                                } else {
                                    urlsc = url.includes("?") ? (url + "&c=" + paramsc) : (url + "?c=" + paramsc)
                                }
                                return urlsc
                            }
                            if (key == 0) {
                                putMyVar("url", input)
                            } else {
                                var inputt = eval(input)
                                    .replace("https://javmenu.com/zh", "")
                                putMyVar("url", inputt)
                            }
                            refreshPage(true)
                            return "hiker://empty"
                        }, {
                            cate_temp: cate_temp,
                            index: index,
                            key: key,
                            page: MY_PAGE,
                        }, key, url),
                        col_type: 'scroll_button',
                    })
                })
                Apollo.d.push({
                    col_type: "blank_block"
                });
            })
        }
    },

    //ä¸€çº§è§†é¢‘åˆ—è¡¨
    videoType: (html) => {
        try {
            var lastpagenum = pdfh(html, ".pagination&&li,-2&&Text") ? pdfh(html, ".pagination&&li,-2&&Text")
                .replace(/.*?(\d+)/, "$1") : "1";
            var currpagenum = pdfh(html, ".pagination&&li[aria-current]&&Text")
                .replace(/.*?(\d+)/, "$1")
            var lurl = pdfh(html, "html&&link[hreflang=zh]&&href")
        } catch {}
        var list = pdfa(html, "body&&.video-list-item:not(:has(a[target]))");
        list.forEach(item => {
            Apollo.d.push({
                title: pdfh(item, ".lazyload&&alt"),
                desc: pdfh(item, ".text-muted&&Text"),
                img: pdfh(item, ".lazyload&&data-src"),
                url: $(pdfh(item, 'a&&href') + '#noHistory#')
                    .rule(() => {
                    const Apollo = $.require('hiker://page/Apollo')
                    Apollo.videoParse(MY_URL)
                    setResult(Apollo.d)
                }),
                col_type: "movie_2",
                extra: {
                    pageTitle: pdfh(item, ".lazyload&&alt"),
                    longClick: lastpagenum > 0 ? [{
                        title: 'ã€è·³é¡µã€‘ã€å½“å‰' + currpagenum + 'ã€‘=>\tæœ€å¤§é¡µ\t:ã€' + lastpagenum + "ã€‘",
                        js: $.toString((currpagenum, lastpagenum, lurl) => {
                            return $('', '1åˆ°' + lastpagenum + 'ä¹‹é—´çš„é¡µç ')
                                .input((lastpagenum, lurl) => {
                                if (parseInt(input) > 0 && parseInt(input) <= parseInt(lastpagenum) && parseInt(input) % 1 == 0) {
                                    var jumpu = lurl.replace(/(\?page=\d+|\&page=\d+|$)/, (match) => {
                                        if (match.startsWith('?page=') || match.startsWith('&page=')) {
                                            return match.charAt(0) + 'page=' + input;
                                        } else {
                                            return (lurl.includes('?') ? '&page=' : '?page=') + input;
                                        }
                                    });
                                    putMyVar("url", jumpu);
                                    putMyVar("yurl", jumpu);
                                    refreshPage(false);
                                    return 'toast://ä½ å·²ç»ç©¿è¶Šåˆ°äº†' + input + 'é¡µ'
                                } else {
                                    return "toast://è¯·è¾“å…¥æ­£ç¡®çš„é¡µç "
                                }
                            },
                            lastpagenum, lurl)
                        },
                        currpagenum, lastpagenum, lurl)
                    }] : ''
                }
            })
        })
    },

    //ä¸€çº§æ¼”å‘˜
    avatarType: (html) => {
        var list = pdfa(html, '.card-deck&&.video-list-item')
        list.forEach(item => {
            Apollo.d.push({
                title: pdfh(item, '.text-dark&&Text'),
                desc: "",
                pic_url: pdfh(item, 'img&&data-src') + '@Referer=',
                url: $(pdfh(item, 'a&&href') + '#fypage#noHistory#')
                    .rule(() => {
                    const Apollo = $.require('hiker://page/Apollo')
                    Apollo.avatarParse(MY_URL)
                    setResult(Apollo.d)
                }),
                col_type: 'card_pic_3'
            })
        })
    },

    //ä¸€çº§ç³»åˆ—
    seriesType: (html) => {
        //éšæœºé¢œè‰²
        var getRangeColors = function() {
            return '#' + ('00000' + (Math.random() * 0x1000000 << 0)
                .toString(16))
                .substr(-6);
        }
        var list = pdfa(html, '.card-deck&&.col-lg-2')
        list.forEach(item => {
            Apollo.d.push({
                title: 'â€œâ€œâ€â€' + pdfh(item, 'a&&Text')
                    .fontcolor(getRangeColors()),
                desc: "",
                // pic_url: pdfh(item, 'img&&data-src') + '@Referer=',
                url: $(Apollo.url + pdfh(item, 'a&&href') + '#fypage#noHistory#')
                    .rule(() => {
                    const Apollo = $.require('hiker://page/Apollo')
                    Apollo.avatarParse(MY_URL)
                    setResult(Apollo.d)
                }),
                col_type: 'flex_button'
            })
        })
        Apollo.d.push({
            col_type: "blank_block"
        })
    },

    //ä¸€çº§é¡µé¢.ç®€
    avatarParse: (url) => {
        addListener("onClose", $.toString(() => {
            clearMyVar("yurl");
            clearMyVar("nextPage1");
        }));
        url = getMyVar("yurl", url)
            .replace(/(.*?)#.*/, "$1");
        let nextPage = getMyVar("nextPage1", "");
        if (nextPage && MY_PAGE > 1) {
            url = nextPage;
        } else if (MY_PAGE > 1) {
            url = "æ²¡æœ‰ä¸‹ä¸€é¡µå“¦ğŸ˜‘"
        }
        const html = fetch(url, {
            headers: {
                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'
            }
        })
        log(url)
        try {
            var next = pdfh(html, ".pagination&&li:matches(â€º)&&a&&href")
            putMyVar("nextPage1", next);
        } catch {
            clearMyVar("nextPage1");
            // log("å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜");
        }
        if (MY_PAGE === 1) {
            Apollo.videoSort1(html, url)
        }
        Apollo.videoType(html)
    },

    //æœç´¢
    searchParse: (url) => {
        url = url.replace("hiker://empty##", "")
        log(url)
        const html = fetch(url, {
            headers: {
                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'
            }
        });
        Apollo.videoType(html)
        setResult(Apollo.d)
    },

    //äºŒçº§
    videoParse: (url) => {
        addListener("onClose", () => {
            clearMyVar("piclist");
        });
        var yiji = $('#fypage#noHistory#')
            .rule(() => {
            const Apollo = $.require('hiker://page/Apollo')
            Apollo.avatarParse(MY_URL)
            setResult(Apollo.d)
        })
        const html = fetch(url, {
            headers: {
                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'
            }
        })
        log(url)
        var title = pdfh(html, "h1&&Text")
            .replace("å…è´¹AVåœ¨çº¿çœ‹", "");
        var desct = title;
        Apollo.d.push({
            title: 'â€œâ€œâ€â€' + title.fontcolor("#E57A1A"),
            url: "hiker://empty" + $('#noLoading#')
                .lazyRule((desct) => {
                var desc = findItem('transdesc')
                    .desc
                if (!desc) {
                    const Apollo = $.require('hiker://page/Apollo')
                    var translates = Apollo.translate(desct)
                    updateItem("transdesc", {
                        desc: 'â€œâ€œâ€â€' + translates.fontcolor("red"),
                    })
                } else {
                    updateItem("transdesc", {
                        desc: '',
                    })
                }
                return "hiker://empty"
            }, desct),
            col_type: 'text_1',
            extra: {
                lineVisible: false,
                id: 'transdesc',
                longClick: [{
                    title: 'ç½‘é¡µ',
                    js: $.toString(() => {
                        return "web://" + MY_URL
                    })
                }, {
                    title: 'å¤åˆ¶',
                    js: $.toString((title) => {
                        return "copy://" + title;
                    }, title)
                }, {
                    title: 'ç™¾åº¦ç¿»è¯‘',
                    js: $.toString((title) => {
                        return "x5://https://fanyi.baidu.com/#jp/zh/" + title
                    }, title)
                }, {
                    title: 'Deeplç¿»è¯‘',
                    js: $.toString((title) => {
                        return "x5://https://www.deepl.com/zh/translator-mobile#ja/zh/" + title
                    }, title)
                }, {
                    title: 'è°·æ­Œç¿»è¯‘',
                    js: $.toString((title) => {
                        return "x5://https://translate.google.com/?hl=zh-CN&sl=ja&tl=zh-CN&text=" + title
                    }, title)
                }]
            }
        })
        const img = pdfh(html, "meta[property=og:image]&&content");
        const preview = pdfh(html, "#pills-preview&&source&&src")
        Apollo.d.push({
            img: img,
            url: preview ? preview : "toast://æ²¡æœ‰é¢„è§ˆè§†é¢‘å“¦ğŸ˜",
            col_type: "pic_1_full",
        })
        Apollo.d.push({
            col_type: "big_blank_block"
        })
        try {
            var names = pdfa(html, '#player-tab&&li:not(:matches(å½±ç‰‡é¢„è§ˆ))');
            var urls = html.match(/m3u8.push.*/g)
                .map(m => m.match(/https?.*?\.m3u8/)[0]);
            for (var i = 0; i < Math.min(urls.length, names.length); i++) {
                Apollo.d.push({
                    title: pdfh(names[i], 'Text'),
                    url: urls[i],
                    col_type: names.length === 1 ? 'text_2' : (names.length > 5 ? 'flex_button' : 'text_' + names.length),
                })
            }
        } catch (err) {};
        Apollo.d.push({
            col_type: "big_blank_block"
        })
        const è¯†åˆ«ç  = pdfh(html, "body&&.card-body&&.code--span&&Text")
        Apollo.CodeParse(è¯†åˆ«ç )

        try {
            var picnum = "ç‚¹å‡»å±•å¼€å›¾ç‰‡";
            if (picnum != "") {
                var list = pdfa(html, "body&&.py-0&&a")
                Apollo.d.push({
                    title: 'â€œâ€œâ€â€' + (picnum + list.length + "å¼ ")
                        .fontcolor("#FF00FF"),
                    url: Apollo.empty + $("")
                        .lazyRule((list) => {
                        try {
                            if (getMyVar("piclist", "æ”¶èµ·") == "æ”¶èµ·") {
                                addItemAfter('picnum', {
                                    title: 'â€œâ€œâ€â€' + "ã€æ”¶èµ·å›¾ç‰‡ã€‘".fontcolor("#FF00FF"),
                                    url: "hiker://empty" + $("")
                                        .lazyRule((list) => {
                                        for (var i = list.length - 1; i >= 0; i--) {
                                            deleteItem('previewpic' + i);
                                        }
                                        deleteItem('nopiclist');
                                        putMyVar("piclist", "æ”¶èµ·");
                                        return "hiker://empty"
                                    }, list),
                                    col_type: "text_center_1",
                                    extra: {
                                        lineVisible: false,
                                        id: "nopiclist"
                                    }
                                })
                                for (var i = list.length - 1; i >= 0; i--) {
                                    addItemAfter('picnum', {
                                        url: 'hiker://empty',
                                        img: pdfh(list[i], "a&&href")
                                            .replace(/.*(https?.*)/, "$1"),
                                        col_type: "pic_1_full",
                                        extra: {
                                            id: 'previewpic' + i
                                        }
                                    });
                                }
                                putMyVar("piclist", "å±•å¼€");
                            } else {
                                for (var i = list.length - 1; i >= 0; i--) {
                                    deleteItem('previewpic' + i);
                                }
                                deleteItem('nopiclist');
                                putMyVar("piclist", "æ”¶èµ·");
                            }
                            return "hiker://empty"
                        } catch {
                            return "hiker://empty"
                        }
                    }, list),
                    col_type: "text_center_1",
                    extra: {
                        lineVisible: false,
                        id: "picnum"
                    }
                })
            }
        } catch {}

        Apollo.d.push({
            title: 'â€œâ€œâ€â€' + "ç•ªå·".fontcolor("#FFD000"),
            url: "copy://" + è¯†åˆ«ç ,
            col_type: "scroll_button",
        }, {
            title: pdfh(html, "body&&.card-body&&.code&&a&&Text") ? 'â€œâ€œâ€â€' + pdfh(html, "body&&.card-body&&.code&&a&&Text")
                .fontcolor("#FFD000") + pdfh(html, "body&&.card-body&&.code&&span,-1&&Text")
                .fontcolor("green") : 'â€œâ€œâ€â€' + pdfh(html, "body&&.card-body&&.code&&span,-1&&Text")
                .fontcolor("#FF00FF"),
            url: pdfh(html, "body&&.card-body&&.code&&a&&Text") ? Apollo.url + pdfh(html, "body&&.card-body&&.code&&a&&href") + yiji : Apollo.empty,
            col_type: "scroll_button",
            extra: {
                pageTitle: pdfh(html, "body&&.card-body&&.code&&a&&Text")
            }
        }, {
            col_type: 'blank_block',
        }, {
            title: "æ—¥æœŸ:",
            url: Apollo.empty,
            col_type: "scroll_button",
        }, {
            title: pdfh(html, 'body&&.card-body&&.d-flex:contains(æ—¥æœŸ:)&&Text') ? pdfh(html, 'body&&.card-body&&.d-flex:contains(æ—¥æœŸ:)&&Text')
                .replace("æ—¥æœŸ: ", "") : "N/A",
            url: Apollo.empty,
            col_type: "scroll_button",
        }, {
            title: "æ—¶é•¿:",
            url: Apollo.empty,
            col_type: "scroll_button",
        }, {
            title: pdfh(html, 'body&&.card-body&&.d-flex:contains(æ—¶é•¿:)&&Text') ? pdfh(html, 'body&&.card-body&&.d-flex:contains(æ—¶é•¿:)&&Text')
                .replace("æ—¶é•¿: ", "") : "N/A",
            url: Apollo.empty,
            col_type: "scroll_button",
        })
        //ç‰‡å•†
        try {
            var makers = pdfh(html, 'body&&.card-body&&.d-flex:contains(è£½ä½œ:)&&a&&Text');
            if (makers) {
                Apollo.d.push({
                    title: "ç‰‡å•†:",
                    url: 'hiker://empty',
                    col_type: 'scroll_button',
                })
                Apollo.d.push({
                    title: 'â€˜â€˜â€™â€™<b><middle><font color="#1E90FF">' + makers + '</font></middle></b>',
                    url: Apollo.url + pdfh(html, 'body&&.card-body&&.d-flex:contains(è£½ä½œ:)&&a&&href') + yiji,
                    col_type: 'scroll_button',
                    extra: {
                        pageTitle: makers
                    }
                })
            }
        } catch {}

        //æ¼”å‘˜
        var arts = parseDomForArray(html, 'body&&.card-body&&.d-flex:contains(å¥³ä¼˜:)&&a');
        if (arts.length > 0) {
            Apollo.d.push({
                col_type: "blank_block"
            })
            Apollo.d.push({
                title: "æ¼”å“¡:",
                url: 'hiker://empty',
                col_type: 'scroll_button',
            })
            for (var i in arts) {
                var title = parseDomForHtml(arts[i], 'Text');
                Apollo.d.push({
                    title: 'â€˜â€˜â€™â€™<b><middle><font color="#c13141">' + title + '</font></middle></b>',
                    url: Apollo.url + pdfh(arts[i], 'a&&href') + yiji,
                    col_type: 'scroll_button',
                    extra: {
                        pageTitle: title,
                        longClick: [{
                            title: 'å¤åˆ¶æ¼”å‘˜',
                            js: $.toString((title) => {
                                return "copy://" + title;
                            }, title)
                        }, {
                            title: 'è°·æ­Œæœç´¢',
                            js: $.toString((title) => {
                                return "https://www.google.com/search?q=" + title;
                            }, title)
                        }, {
                            title: 'ç™¾åº¦æœç´¢',
                            js: $.toString((title) => {
                                return "https://www.baidu.com/s?wd=" + title;
                            }, title)
                        }, {
                            title: 'ç£åŠ›æœæ¼”å‘˜',
                            js: $.toString((title) => {
                                return "hiker://page/sou?rule=ç£åŠ›å›.ç®€&p=fypage&searchTerms=" + title
                            }, title)
                        }]
                    }
                })
            }
        }

        //å¯¼æ¼”
        try {
            var director = pdfh(html, 'body&&.card-body&&.d-flex:contains(å¯¼æ¼”:)&&a&&Text');
            if (director) {
                Apollo.d.push({
                    title: "å¯¼æ¼”:",
                    url: 'hiker://empty',
                    col_type: 'scroll_button',
                })
                Apollo.d.push({
                    title: 'â€˜â€˜â€™â€™<b><middle><font color="#1E90FF">' + director + '</font></middle></b>',
                    url: Apollo.url + pdfh(html, 'body&&.card-body&&.d-flex:contains(å¯¼æ¼”:)&&a&&href') + yiji,
                    col_type: 'scroll_button',
                    extra: {
                        pageTitle: director
                    }
                });
            }
        } catch {}

        //ç±»åˆ«
        var arts = parseDomForArray(html, 'body&&.card-body&&.d-flex:contains(ç±»åˆ«:)&&a');
        if (arts.length > 0) {
            Apollo.d.push({
                col_type: "blank_block"
            })
            Apollo.d.push({
                title: "é¡åˆ¥:",
                url: 'hiker://empty',
                col_type: 'scroll_button',
            });
            for (var i in arts) {
                Apollo.d.push({
                    title: 'â€˜â€˜â€™â€™<b><middle><font color="#1E8884">' + parseDomForHtml(arts[i], 'Text') + '</font></middle></b>',
                    url: Apollo.url + pdfh(arts[i], 'a&&href') + yiji,
                    col_type: 'scroll_button',
                    extra: {
                        pageTitle: parseDomForHtml(arts[i], 'Text')
                    }
                })
            }
        }

        //ç³»åˆ—
        var arts = parseDomForArray(html, 'body&&.card-body&&.d-flex:contains(ç³»åˆ—:)&&a');
        if (arts.length > 0) {
            Apollo.d.push({
                col_type: "blank_block"
            })
            Apollo.d.push({
                title: "ç³»åˆ—:",
                url: 'hiker://empty',
                col_type: 'scroll_button',
            });
            for (var i in arts) {
                Apollo.d.push({
                    title: 'â€˜â€˜â€™â€™<b><middle><font color="#67E0FA">' + parseDomForHtml(arts[i], 'Text') + '</font></middle></b>',
                    url: Apollo.url + pdfh(arts[i], 'a&&href') + yiji,
                    col_type: 'scroll_button',
                    extra: {
                        pageTitle: parseDomForHtml(arts[i], 'Text')
                    }
                })
            }
        }
        Apollo.CiliParse(html)

        //åŒæ¼”å‘˜ä½œå“
        var sameactor = pdfh(html, "body&&.col-12.mt-5&&Text");
        if (sameactor) {
            Apollo.d.push({
                title: '<span style="color: #FF00FF;">' + sameactor + '</span>',
                pic_url: "https://lanmeiguojiang.com/tubiao/ke/100.png",
                col_type: 'rich_text'
            });
        }
        Apollo.videoType(html)

        //åŒä¸»é¢˜ä½œå“
        var sametopic = pdfh(html, "body&&.main-title&&Text");
        if (sametopic) {
            Apollo.d.push({
                title: '<span style="color: #FF00FF;">' + sametopic + '</span>',
                pic_url: "https://lanmeiguojiang.com/tubiao/ke/100.png",
                col_type: 'rich_text'
            });
        }
        var list = pdfa(html, ".list-unstyled&&li");
        list.forEach(item => {
            Apollo.d.push({
                title: pdfh(item, ".lazyload&&alt"),
                desc: pdfh(item, ".text-muted&&Text"),
                img: pdfh(item, ".lazyload&&data-src"),
                url: $(pdfh(item, 'a&&href') + '#noHistory#')
                    .rule(() => {
                    const Apollo = $.require('hiker://page/Apollo')
                    Apollo.videoParse(MY_URL)
                    setResult(Apollo.d)
                }),
                col_type: "movie_2",
                extra: {
                    pageTitle: pdfh(item, ".lazyload&&alt"),
                }
            })
        })
        Apollo.d.push({
            title: 'â€œâ€œâ€â€' + "æˆ‘æ˜¯æœ‰åº•çº¿çš„".fontcolor("grey")
                .small(),
            url: Apollo.empty,
            col_type: "text_center_1",
            extra: {
                lineVisible: false
            }
        })
        setResult(Apollo.d)
    },

    //ç£åŠ›åˆ—è¡¨
    CiliParse: (html) => {
        const magnet = pdfa(html, 'body&&tbody&&.col');
        magnet.forEach(item => {
            Apollo.d.push({
                title: pdfh(item, "a&&Text"),
                desc: pdfh(item, ".badge-primary&&Text") + "\t\t" + pdfh(item, ".badge-danger&&Text") + "\t\t" + pdfh(item, ".badge-success&&Text") + "\t\t" + pdfh(item, ".badge-secondary&&Text"),
                img: "https://img.vinua.cn/images/Ocqpj.png",
                url: pdfh(item, "a&&href"),
                col_type: "avatar",
                extra: {
                    lineVisible: false
                }
            })
        })
    },

    //ç¿»è¯‘
    translate: (text) => {
        var switchtrans = config.switchtrans
        if (switchtrans == true || switchtrans == "å½©äº‘å°è¯‘") {
            try {
                var to = 'zh'
                var from = 'auto'

                    function init_data(source_lang, target_lang) {
                        return {
                            source: '',
                            detect: true,
                            os_type: 'ios',
                            device_id: 'F1F902F7-1780-4C88-848D-71F35D88A602',
                            trans_type: source_lang + '2' + target_lang,
                            media: 'text',
                            request_id: 424238335,
                            user_id: '',
                            dict: true,
                        }
                    }

                    function getRandomNumber() {
                        const rand = Math.floor(Math.random() * 99999) + 100000
                        return rand * 1000
                    }
                const post_data = init_data(from, to)
                post_data.source = text
                post_data.request_id = getRandomNumber()
                let res = fetch('https://interpreter.cyapi.cn/v1/translator', {
                    method: 'POST',
                    header: {
                        'Content-Type': 'application/json',
                        'x-authorization': 'token ssdj273ksdiwi923bsd9',
                        'user-agent': 'caiyunInterpreter/5 CFNetwork/1404.0.5 Darwin/22.3.0',
                    },
                    body: post_data,
                })
                let result = JSON.parse(res)
                    .target
                return result + "ğŸ‡¨ğŸ‡³â˜ï¸å½©äº‘å°è¯‘"
            } catch {
                log("ç¿»è¯‘å¤±è´¥ï¼Œä½¿ç”¨åŸæ–‡");
                return text
            }
        } else if (switchtrans == "å°ç‰›ç¿»è¯‘") {
            try {
                var url = "https://api.niutrans.com/NiuTransServer/translation";
                var api = config.api;
                if (api) {
                    if (text != "") {
                        var lang = "https://test.niutrans.com/NiuTransServer/language?src_text=" + text + "&source=text";
                        var from = JSON.parse(fetch(lang, {
                            timeout: 1000
                        }))
                            .language;
                        var result = post(url, {
                            body: {
                                src_text: text,
                                from: from,
                                to: "zh",
                                apikey: api,
                            },
                            timeout: 1223
                        });
                        var data = JSON.parse(result)
                        if (data.tgt_text) {
                            return data.tgt_text + "ğŸ‡¨ğŸ‡³ğŸ®å°ç‰›ç¿»è¯‘"
                        } else {
                            log("ç¿»è¯‘å¤±è´¥ï¼Œä½¿ç”¨åŸæ–‡");
                            return text
                        }
                    } else {
                        log("ç¿»è¯‘å¤±è´¥ï¼ŒåŸæ–‡ä¸ºç©º");
                        return text
                    }
                } else {
                    toast("é¢„å¤„ç†è¯·å¡«å†™ç¿»è¯‘api")
                    return text
                }
            } catch {
                log("ç¿»è¯‘å¤±è´¥ï¼Œä½¿ç”¨åŸæ–‡");
                return text
            }
        } else {
            return text
        }
    },

    //å¤–é“¾æ’­æ”¾
    CodeParse: (è¯†åˆ«ç ) => {
        Apollo.d.push({
            col_type: 'blank_block',
        })
        var codelazy = fetch('hiker://files/rules/Apollo/ğ‚ğ¨ğğğ‹ğšğ³ğ².js')
            .replace(/d\.push/g, "Apollo.d.push") || "";

        function downcode() {
            var js = fetch("https://mirror.ghproxy.com/https://raw.githubusercontent.com/ApolloRioo/R/master/ğ‚ğ¨ğğğ‹ğšğ³ğ²");
            writeFile('hiker://files/rules/Apollo/ğ‚ğ¨ğğğ‹ğšğ³ğ².js', js);
            toast("è¿œç¨‹æ•°æ®å·²æ›´æ–°åˆ°æœ¬åœ°")
            codelazy = fetch('hiker://files/rules/Apollo/ğ‚ğ¨ğğğ‹ğšğ³ğ².js')
                .replace(/d\.push/g, "Apollo.d.push")
        }
        if (!codelazy) {
            downcode()
        }
        try {
            eval(codelazy)
        } catch {
            downcode()
            eval(codelazy)
            log("è¯»å–å¤±è´¥æ›´æ–°è¿œç¨‹æ•°æ®")
        }
        CodeLazy(è¯†åˆ«ç )
    }

}

$.exports = Apollo